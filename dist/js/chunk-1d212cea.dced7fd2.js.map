{"version":3,"sources":["webpack:///./src/components/newEvent/Date.vue?7e8d","webpack:///./src/jsModules/dates.js","webpack:///./src/jsModules/holidays.js","webpack:///src/components/newEvent/Date.vue","webpack:///./src/components/newEvent/Date.vue?9d49","webpack:///./src/components/newEvent/Date.vue","webpack:///./src/components/newEvent/Date.vue?c49f","webpack:///./src/views/admin/newEvent/Date.vue?fd1e","webpack:///src/views/admin/newEvent/Date.vue","webpack:///./src/views/admin/newEvent/Date.vue?d568","webpack:///./src/views/admin/newEvent/Date.vue","webpack:///./src/jsModules/date-to-weekday.js","webpack:///./src/views/admin/newEvent/Date.vue?8bdc"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","day","index","key","class","closed","directives","name","rawName","value","expression","attrs","type","id","disabled","domProps","checked","_q","selectedDate","on","change","$event","updateSelectedDate","for","_v","_s","shortname","date","getDate","getMonth","times","length","time","selectedTime","updateSelectedTime","addLeadingZero","getHours","getMinutes","_e","infoMessage","next","staticRenderFns","dates","days","i","globals","daysToBook","Date","newDate","setDate","setHours","weekdayItem","dateToWeekday","weekdays","push","weekname","timeStamp","getTime","holidays","2019","2020","2021","2022","Datevue_type_script_lang_js_","data","$store","getters","thisYearHolidays","getFullYear","allDates","computed","selectedDateAndTimeMessage","components","nextButton","NextButton","mixins","getAvailableTimes","methods","val","Object","add_leading_zero","getOpeningHours","_getOpeningHours","asyncToGenerator","regeneratorRuntime","mark","_callee","_this","wrap","_context","prev","abrupt","Promise","resolve","reject","dispatch","then","stop","apply","arguments","setTimes","_setTimes","_callee2","availableTimes","_context2","sent","Array","isArray","thisDay","weekindex","isNowClosed","openingHours","shopDays","timeBlock","closing","split","now","closingTime","hours","parseInt","minutes","checkIfDayIsHoliday","concat","indexOf","checkIfShopHoliday","allDayEmployeeShopHolidays","dayNotAvailable","filter","elm","startDate","endDate","checkIfSelectedDateIsOpen","_this2","pathName","isAdmin","userName","$nextTick","$router","parent_path","mounted","_mounted","_callee3","promises","_this3","_context3","scope","onlyFuture","all","employeeHolidays","allDayEmployeeHolidays","allDayEvent","forEach","newEvent_Datevue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Date_vue_vue_type_style_index_0_id_c5a5d3bc_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Date_vue_vue_type_style_index_0_id_c5a5d3bc_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","newEvent_Date","getDay","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Date_vue_vue_type_style_index_0_id_5ee9a5de_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Date_vue_vue_type_style_index_0_id_5ee9a5de_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-1d212cea.dced7fd2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"date-picker\"},[_c('ul',{staticClass:\"dates\"},_vm._l((_vm.days),function(day,index){return _c('li',{key:'day' + index,class:{'closed': day.closed }},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedDate),expression:\"selectedDate\"}],attrs:{\"type\":\"radio\",\"id\":'date' + index,\"name\":\"date\",\"disabled\":day.closed},domProps:{\"value\":index,\"checked\":_vm._q(_vm.selectedDate,index)},on:{\"change\":[function($event){_vm.selectedDate=index},function($event){_vm.updateSelectedDate(index)}]}}),_c('label',{attrs:{\"for\":'date' + index}},[_c('div',[_vm._v(_vm._s(day.shortname))]),_c('div',[_vm._v(_vm._s(day.date.getDate())+\".\"+_vm._s(day.date.getMonth() + 1))])])])}))]),_c('div',{staticClass:\"time-picker\"},[(_vm.times.length > 0)?_c('ul',{staticClass:\"times\"},_vm._l((_vm.times),function(time,index){return _c('li',{key:'time' + index},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedTime),expression:\"selectedTime\"}],attrs:{\"type\":\"radio\",\"id\":'time' + index,\"name\":\"time\"},domProps:{\"value\":index,\"checked\":_vm._q(_vm.selectedTime,index)},on:{\"change\":[function($event){_vm.selectedTime=index},function($event){_vm.updateSelectedTime(index)}]}}),_c('label',{attrs:{\"for\":'time' + index}},[_c('div',[_vm._v(_vm._s(_vm.addLeadingZero(time.getHours()))+\" : \"+_vm._s(_vm.addLeadingZero(time.getMinutes())))])])])})):_vm._e(),(_vm.infoMessage)?_c('p',[_vm._v(_vm._s(_vm.infoMessage))]):_vm._e(),(!_vm.infoMessage && _vm.selectedDate === null)?_c('p',{staticClass:\"hint\"},[_vm._v(\"Kicke auf ein Datum aus der Liste\")]):_vm._e()]),(_vm.selectedDate !== null && _vm.selectedTime !== null)?_c('nextButton',{on:{\"next\":_vm.next}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import weekdays from './days';\nimport globals from '../global-variables';\nimport dateToWeekday from '@/jsModules/date-to-weekday';\n\nexport default () => {\n  const days = []; \n    \n  for (let i = 0; i < globals.daysToBook; i++) {\n    let date = new Date();\n    let newDate = new Date(date.setDate(date.getDate()+ i));\n    newDate.setHours(0,0,0,0);\n    const weekdayItem = dateToWeekday(newDate, weekdays);\n\n    days.push({\n      date: newDate,\n      weekname: weekdayItem.day.name,\n      shortname: weekdayItem.day.shortname,\n      index: weekdayItem.index,\n      timeStamp: newDate.getTime()\n    });   \n  }\n  \n  return days;\n\n}","export default {\n  \"2019\": {\n    \"days\": [\"1.1\",\"6.1\",\"22.4\",\"1.5\",\"30.5\",\"10.6\",\"20.6\",\"15.8\",\"26.10\",\"1.11\",\"8.12\",\"25.12\",\"26.12\"]\n  },\n\n  \"2020\" : {\n    \"days\": [\"1.1\",\"6.1\",\"13.4\",\"1.5\",\"21.5\",\"1.6\",\"11.6\",\"15.8\",\"26.10\",\"1.11\",\"8.12\",\"25.12\",\"26.12\"]\n  },\n\n  \"2021\": {\n    \"days\": [\"1.1\",\"6.1\",\"5.4\",\"1.5\",\"13.5\",\"24.5\",\"3.6\",\"15.8\",\"26.10\",\"1.11\",\"8.12\",\"25.12\",\"26.12\"]\n  },\n\n  \"2022\": {\n    \"days\": [\"1.1\",\"6.1\",\"18.4\",\"1.5\",\"26.5\",\"6.6\",\"16.6\",\"15.8\",\"26.10\",\"1.11\",\"8.12\",\"25.12\",\"26.12\"]\n  }\n}","<template>\n  <div>\n    <div class=\"date-picker\">\n      <ul class=\"dates\">\n        <li v-for=\"(day,index) in days\" :key=\"'day' + index\" :class=\"{'closed': day.closed }\" >\n          <input type=\"radio\" :id=\"'date' + index\" :value=\"index\" name=\"date\" v-model=\"selectedDate\" @change=\"updateSelectedDate(index)\" :disabled=\"day.closed\">\n          <label :for=\"'date' + index\">\n           <div>{{ day.shortname }}</div>\n           <div>{{ day.date.getDate() }}.{{ day.date.getMonth() + 1}}</div>\n            \n          </label>\n        </li>\n      </ul>\n    </div>\n    <div class=\"time-picker\">\n      <ul class=\"times\" v-if=\"times.length > 0\">\n        <li v-for=\"(time,index) in times\" :key=\"'time' + index\">\n          <input type=\"radio\" :id=\"'time' + index\" :value=\"index\" name=\"time\" v-model=\"selectedTime\" @change=\"updateSelectedTime(index)\">\n          <label :for=\"'time' + index\">\n            <div>{{ addLeadingZero(time.getHours()) }} : {{ addLeadingZero(time.getMinutes()) }}</div>\n          </label>\n          \n        </li>\n      </ul>\n      <p v-if=\"infoMessage\">{{ infoMessage }}</p>\n      <p class=\"hint\" v-if=\"!infoMessage && selectedDate === null\">Kicke auf ein Datum aus der Liste</p>\n    </div>\n\n    <nextButton v-if=\"selectedDate !== null && selectedTime !== null\" @next=\"next\" />\n    \n  </div>\n</template>\n\n<script>\nimport parentPath from '@/jsModules/parent-path';\nimport dates from '@/jsModules/dates';\nimport holidays from '@/jsModules/holidays';\nimport addLeadingZero from '@/jsModules/add-leading-zero';\nimport availableTimes from '@/mixins/getAvailableTimes';\nimport nextButton from '@/components/NextButton';\n\nexport default {\n  data() {\n    const getters = this.$store.getters;\n    return {\n      thisYearHolidays: holidays[new Date().getFullYear()],\n      allDates: dates(),\n      days: [],\n      times: [],\n      selectedTime: null,\n      selectedDate: null\n      //selectedDate: getters.selectedDate.hasOwnProperty('index') ? getters.selectedDate.index : null\n    }\n  },\n  computed: {\n    infoMessage() {\n      return this.$store.getters.selectedDateAndTimeMessage;\n    }\n  },\n  \n  components: {\n    nextButton\n  },\n\n  mixins: [availableTimes],\n\n  methods: {\n    addLeadingZero(val) {\n      return addLeadingZero(val);\n    },\n    \n    async getOpeningHours() {\n      return new Promise((resolve, reject) => {\n        this.$store.dispatch('updateShopDays', this).then(() => {\n          resolve();\n        }); \n      });\n    },\n\n    async setTimes() {\n      this.$store.dispatch('updateIsLoading', true);\n      await this.getOpeningHours();\n      let availableTimes = await this.getAvailableTimes();\n      \n      if (Array.isArray(availableTimes)) {\n        if (availableTimes.length == 0) {\n          this.$store.dispatch('updateSelectedDateAndTimeMessage', 'Leider schon voll');\n        } else {\n          this.$store.dispatch('updateSelectedDateAndTimeMessage', null);\n        }\n      } else {\n        this.$store.dispatch('updateSelectedDateAndTimeMessage', 'Mitarbeiter arbeitet nicht');\n      }\n      \n      //this.$store.dispatch('updateAvailableTimes', availableTimes);\n      this.times = availableTimes;\n      this.$store.dispatch('updateIsLoading', false);\n    },\n\n    updateSelectedDate(index) {\n      const thisDay = this.days[index];\n      const weekindex = thisDay.index;\n      const date = thisDay.date;\n\n      this.$store.dispatch('updateSelectedDate', {index, date, weekindex});\n      this.$store.dispatch('updateSelectedTime', {});\n      this.selectedTime = null;\n      this.setTimes();\n    },\n\n    updateSelectedTime(index) {\n      const time = this.times[index];\n      this.$store.dispatch('updateSelectedTime', {index, time});\n    },\n\n    isNowClosed(day) {\n      let isOpen = false;\n      const openingHours = this.$store.getters.shopDays;\n      const times = openingHours[day.index].times;\n\n      if (times.length > 0) {\n        const timeBlock = times[times.length - 1];\n        const closing = timeBlock[timeBlock.length - 1].split(':');\n        const now = new Date();\n        const closingTime = new Date();\n        const hours = parseInt(closing[0]);\n        const minutes = parseInt(closing[1]);\n        closingTime.setHours(hours,minutes,0,0);\n        return now.getTime() > closingTime.getTime();\n      } else {\n        return false;\n      }\n      \n    },\n\n    checkIfDayIsHoliday(date) {\n      const thisDay = `${date.getDate()}.${(date.getMonth() + 1)}`;   \n      return this.thisYearHolidays.days.indexOf(thisDay) > -1;\n    },\n\n    checkIfShopHoliday(allDayEmployeeShopHolidays, timeStamp) {\n      const dayNotAvailable = allDayEmployeeShopHolidays.filter((elm) => {\n        return timeStamp == elm.startDate  \n               || (timeStamp > elm.startDate && timeStamp <= elm.endDate);\n      });\n      \n      return dayNotAvailable.length > 0;\n    },\n\n    checkIfSelectedDateIsOpen() {\n      // In case user selected a date which is now closed\n      if (this.selectedDate !== null) {\n        if (this.allDates[this.selectedDate].closed) {\n          this.$store.dispatch('updateSelectedDate', {});\n          this.selectedDate = null;\n        } else {\n          this.setTimes();\n        }\n      }\n    },\n\n    next() {\n      let pathName = '/overview';\n      if (this.$store.getters.isAdmin || !this.$store.getters.userName) {\n        pathName = '/info';\n      }\n      this.$store.dispatch('updateTransitionName', 'forth');\n      this.$nextTick(() => { this.$router.push(parentPath(this) + pathName); });\n    }\n  },\n\n  async mounted() {\n    const promises = [];\n    promises.push(this.getOpeningHours());\n    promises.push(this.$store.dispatch('updateShopHolidays', {scope: this, onlyFuture: true}));\n    \n    Promise.all(promises).then(() => {\n      const allDates = this.allDates;\n      const openingHours = this.$store.getters.shopDays; \n\n      // get holidays of employee\n      const employeeHolidays = this.$store.getters.employeeHolidays;\n      \n      // get allDay holidays of employee\n      const allDayEmployeeHolidays = employeeHolidays.filter(elm => elm.allDayEvent);\n \n      // Check if now is closed\n      if (this.isNowClosed(allDates[0])) { allDates[0].closed = true; }\n      \n      allDates.forEach((date, index) => {\n        if (openingHours[date.index].times.length === 0) { date.closed = true; }\n\n        // Check if calender holiday\n        if (this.checkIfDayIsHoliday(date.date)) { date.closed = true; }\n\n        // Check if Shop Holiday of employee\n        if (this.checkIfShopHoliday(allDayEmployeeHolidays, date.timeStamp)) { date.closed = true; }\n\n      });\n\n      \n      this.days = allDates;\n\n      // Check if selected date is open (today)\n      this.checkIfSelectedDateIsOpen();\n\n      this.$store.dispatch('updateIsLoading', false);\n    \n    });\n\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  @import '@/styles/variables.scss';\n  .hint {\n    font-size: 24px;\n    font-weight: bold;\n    margin: 0 auto;\n    text-align: center;\n    color: $color6;\n    padding-top: 50px;\n    &:before {\n      content: '\\f073';\n      font-family: $icon;\n      display: block;\n      font-weight: normal;\n      font-size: 3em;\n      margin-bottom: .2em;\n    }\n  }\n  .weekdays {\n    width: 100%;\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    display: flex;\n    justify-content: space-between;\n  }\n  label {\n    padding-right: 2px;\n    padding-top: 15px;\n    padding-bottom: 15px;\n  }\n  .dates {\n    display: flex;\n    overflow: auto;\n    padding-bottom: 10px;\n    border-bottom: 1px solid $color5;\n    \n    li.closed {\n      opacity: .3;\n      cursor: default;\n      pointer-events: none;\n    }\n\n    li + li {\n      margin-left: 10px;\n    }\n  }\n  .times {\n    li {\n      border-bottom: 1px solid $color5;\n    }\n    li + li {\n      border-top: none;\n    }\n  }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Date.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Date.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Date.vue?vue&type=template&id=c5a5d3bc&scoped=true&\"\nimport script from \"./Date.vue?vue&type=script&lang=js&\"\nexport * from \"./Date.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Date.vue?vue&type=style&index=0&id=c5a5d3bc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c5a5d3bc\",\n  null\n  \n)\n\ncomponent.options.__file = \"Date.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Date.vue?vue&type=style&index=0&id=c5a5d3bc&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Date.vue?vue&type=style&index=0&id=c5a5d3bc&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(\"Wähle einen Tag aus\")]),_c('date')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h2>Wähle einen Tag aus</h2>\n    <date />\n  </div>\n</template>\n<script>\n  import date from '@/components/newEvent/Date';\n  export default {\n    components: {\n      date\n    }\n  }\n</script>\n<style scoped lang=\"scss\">\n\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Date.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Date.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Date.vue?vue&type=template&id=5ee9a5de&scoped=true&\"\nimport script from \"./Date.vue?vue&type=script&lang=js&\"\nexport * from \"./Date.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Date.vue?vue&type=style&index=0&id=5ee9a5de&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ee9a5de\",\n  null\n  \n)\n\ncomponent.options.__file = \"Date.vue\"\nexport default component.exports","export default(date, weekdays) => {\n  let index = date.getDay() - 1;\n  if (index === -1) { index = (weekdays.length - 1); }\n  return {\n    index,\n    day: weekdays[index]\n  };\n}","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Date.vue?vue&type=style&index=0&id=5ee9a5de&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Date.vue?vue&type=style&index=0&id=5ee9a5de&scoped=true&lang=scss&\""],"sourceRoot":""}