(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d212cea"],{"0351":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"date-picker"},[s("ul",{staticClass:"dates"},e._l(e.days,function(t,a){return s("li",{key:"day"+a,class:{closed:t.closed}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedDate,expression:"selectedDate"}],attrs:{type:"radio",id:"date"+a,name:"date",disabled:t.closed},domProps:{value:a,checked:e._q(e.selectedDate,a)},on:{change:[function(t){e.selectedDate=a},function(t){e.updateSelectedDate(a)}]}}),s("label",{attrs:{for:"date"+a}},[s("div",[e._v(e._s(t.shortname))]),s("div",[e._v(e._s(t.date.getDate())+"."+e._s(t.date.getMonth()+1))])])])}))]),s("div",{staticClass:"time-picker"},[e.times.length>0?s("ul",{staticClass:"times"},e._l(e.times,function(t,a){return s("li",{key:"time"+a},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedTime,expression:"selectedTime"}],attrs:{type:"radio",id:"time"+a,name:"time"},domProps:{value:a,checked:e._q(e.selectedTime,a)},on:{change:[function(t){e.selectedTime=a},function(t){e.updateSelectedTime(a)}]}}),s("label",{attrs:{for:"time"+a}},[s("div",[e._v(e._s(e.addLeadingZero(t.getHours()))+" : "+e._s(e.addLeadingZero(t.getMinutes())))])])])})):e._e(),e.infoMessage?s("p",[e._v(e._s(e.infoMessage))]):e._e(),e.infoMessage||null!==e.selectedDate?e._e():s("p",{staticClass:"hint"},[e._v("Kicke auf ein Datum aus der Liste")])]),null!==e.selectedDate&&null!==e.selectedTime?s("nextButton",{on:{next:e.next}}):e._e()],1)},n=[],i=(s("ac6a"),s("28a5"),s("96cf"),s("3040")),r=s("2154"),c=(s("7f7f"),s("d476")),o=s("baac"),d=s("a061"),u=function(){for(var e=[],t=0;t<o["a"].daysToBook;t++){var s=new Date,a=new Date(s.setDate(s.getDate()+t));a.setHours(0,0,0,0);var n=Object(d["a"])(a,c["a"]);e.push({date:a,weekname:n.day.name,shortname:n.day.shortname,index:n.index,timeStamp:a.getTime()})}return e},l={2019:{days:["1.1","6.1","22.4","1.5","30.5","10.6","20.6","15.8","26.10","1.11","8.12","25.12","26.12"]},2020:{days:["1.1","6.1","13.4","1.5","21.5","1.6","11.6","15.8","26.10","1.11","8.12","25.12","26.12"]},2021:{days:["1.1","6.1","5.4","1.5","13.5","24.5","3.6","15.8","26.10","1.11","8.12","25.12","26.12"]},2022:{days:["1.1","6.1","18.4","1.5","26.5","6.6","16.6","15.8","26.10","1.11","8.12","25.12","26.12"]}},h=s("39ec"),p=s("b4b0"),m=s("0b5a"),f={data:function(){this.$store.getters;return{thisYearHolidays:l[(new Date).getFullYear()],allDates:u(),days:[],times:[],selectedTime:null,selectedDate:null}},computed:{infoMessage:function(){return this.$store.getters.selectedDateAndTimeMessage}},components:{nextButton:m["a"]},mixins:[p["a"]],methods:{addLeadingZero:function(e){return Object(h["a"])(e)},getOpeningHours:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,s){t.$store.dispatch("updateShopDays",t).then(function(){e()})}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),setTimes:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.dispatch("updateIsLoading",!0),e.next=3,this.getOpeningHours();case 3:return e.next=5,this.getAvailableTimes();case 5:t=e.sent,Array.isArray(t)?0==t.length?this.$store.dispatch("updateSelectedDateAndTimeMessage","Leider schon voll"):this.$store.dispatch("updateSelectedDateAndTimeMessage",null):this.$store.dispatch("updateSelectedDateAndTimeMessage","Mitarbeiter arbeitet nicht"),this.times=t,this.$store.dispatch("updateIsLoading",!1);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),updateSelectedDate:function(e){var t=this.days[e],s=t.index,a=t.date;this.$store.dispatch("updateSelectedDate",{index:e,date:a,weekindex:s}),this.$store.dispatch("updateSelectedTime",{}),this.selectedTime=null,this.setTimes()},updateSelectedTime:function(e){var t=this.times[e];this.$store.dispatch("updateSelectedTime",{index:e,time:t})},isNowClosed:function(e){var t=this.$store.getters.shopDays,s=t[e.index].times;if(s.length>0){var a=s[s.length-1],n=a[a.length-1].split(":"),i=new Date,r=new Date,c=parseInt(n[0]),o=parseInt(n[1]);return r.setHours(c,o,0,0),i.getTime()>r.getTime()}return!1},checkIfDayIsHoliday:function(e){var t="".concat(e.getDate(),".").concat(e.getMonth()+1);return this.thisYearHolidays.days.indexOf(t)>-1},checkIfShopHoliday:function(e,t){var s=e.filter(function(e){return t==e.startDate||t>e.startDate&&t<=e.endDate});return s.length>0},checkIfSelectedDateIsOpen:function(){null!==this.selectedDate&&(this.allDates[this.selectedDate].closed?(this.$store.dispatch("updateSelectedDate",{}),this.selectedDate=null):this.setTimes())},next:function(){var e=this,t="/overview";!this.$store.getters.isAdmin&&this.$store.getters.userName||(t="/info"),this.$store.dispatch("updateTransitionName","forth"),this.$nextTick(function(){e.$router.push(Object(r["a"])(e)+t)})}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=[],t.push(this.getOpeningHours()),t.push(this.$store.dispatch("updateShopHolidays",{scope:this,onlyFuture:!0})),Promise.all(t).then(function(){var e=s.allDates,t=s.$store.getters.shopDays,a=s.$store.getters.employeeHolidays,n=a.filter(function(e){return e.allDayEvent});s.isNowClosed(e[0])&&(e[0].closed=!0),e.forEach(function(e,a){0===t[e.index].times.length&&(e.closed=!0),s.checkIfDayIsHoliday(e.date)&&(e.closed=!0),s.checkIfShopHoliday(n,e.timeStamp)&&(e.closed=!0)}),s.days=e,s.checkIfSelectedDateIsOpen(),s.$store.dispatch("updateIsLoading",!1)});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},g=f,v=(s("1272"),s("2877")),D=Object(v["a"])(g,a,n,!1,null,"c5a5d3bc",null);D.options.__file="Date.vue";t["a"]=D.exports},1272:function(e,t,s){"use strict";var a=s("7be7"),n=s.n(a);n.a},"1f66":function(e,t,s){},3125:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",[e._v("WÃ¤hle einen Tag aus")]),s("date")],1)},n=[],i=(s("cadf"),s("551c"),s("097d"),s("0351")),r={components:{date:i["a"]}},c=r,o=(s("c680"),s("2877")),d=Object(o["a"])(c,a,n,!1,null,"5ee9a5de",null);d.options.__file="Date.vue";t["default"]=d.exports},"7be7":function(e,t,s){},a061:function(e,t,s){"use strict";t["a"]=function(e,t){var s=e.getDay()-1;return-1===s&&(s=t.length-1),{index:s,day:t[s]}}},c680:function(e,t,s){"use strict";var a=s("1f66"),n=s.n(a);n.a}}]);
//# sourceMappingURL=chunk-1d212cea.dced7fd2.js.map